---
title: Tutorial 2
permalink: /training/tutorials/tutorial-2
third_nav_title: Tutorials
---

# Tutorial 2: How to attach the L1 Security Policy to your API

<div class="youtube">
  
<iframe width="560" height="315" src="https://www.youtube.com/embed/qvOnXOGfYag" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  
</div>

We've set up the API, but now as it stands anyone with your API's target endpoint can call your API. That's not what we want. We need to be able to control the access to the API and by using APPs, we can do just that. APPs in APEX are a form of identification for the consumer. With this system, API providers can control access to their APIs by changing the security policy of the API to use L1 authentication.

## Step 1: Login (Again if you're not already)

![login to apex](/images/tutorial-1/1-login.png "You should be logged in.")

If you are not logged in already, log in to the same provider account used to create your API previously.
*Note that all participants are sharing the same provider access to this gateway so all API are visible to everyone. Please take care not to accidentally change someone else's API by mistake.*

## Step 2: Attach the L1 Authentication Policy

![policy edit page](/images/tutorial-2/1-policy-edit.png "Changing policies.")

**Go to Implementation -> Live.** There should be a section on the page called policies. **Click on the green Edit button** to go into the Policy Edit page.

![choosing l1](/images/tutorial-2/2-chose-policy.png "There's so many policies!")

From the huge list on the left, we need to locate the **REST L1 Authentication Policy v2 - IG**. Let's break down the structure of the policy wording.
1. **REST** - The type of API
2. **L1**   - The security level. Either L1 or L2.
3. **IG**   - The gateway that this API is on. Either IG or EG.
So depending on your API type, we have several policies available for you to secure your APIs.

## Step 3: Disallow Anonymous Access

![uncheck anon access](/images/tutorial-2/3-anon-access.png "No shady access to this.")

Now that we've attached the L1 policy, there's one more thing to do to ensure that only people we approve of can call our API. Go back to the Implementation page and click on the first green Edit button from the top. This brings us into the API properties page. Inside, **locate the "Allow Anonymous Access" checkbox and uncheck it.** This turns off the ability for anyone to call this API. 

## Step 4: Test the API

![copy calculated endpoint](/images/tutorial-2/4-copy-calcend.png "Simple browser test.")

Let's see if we managed to successful attach the L1 policy properly. To do this test, copy the **Calculated Endpoint URL** from the Deployment section and paste it into the address bar of any web browser. Remove the **.i** from the URL path before hitting enter.

![password prompt](/images/tutorial-2/5-popup.png "No unauthorised access.")

Boom. A username and password prompt should pop up. We don't have a username and password to enter so we can't call the API. To access this API, the API call needs a special HTTPS header with the security token generated by APEX. Without this, no API call can hit the endpoint.

With that, we have successfully managed to increase the security of the API we've created. In the [next tutorial](/training/tutorials/tutorial-3), we will be focusing on accessing the API with APPs.
